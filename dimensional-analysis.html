<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dimensional Analysis Practice - Mustafa Abdul Haque</title>
  <link rel="icon" type="image/svg+xml" href="logos/ICON ONLY Mustafa Abdul Haque (Logo).svg">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Page-specific styles */
    .reference-section {
      display: none;
      background: var(--color-white);
      padding: 1rem;
      border-radius: var(--radius-sm);
      margin-bottom: 0.75rem;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--color-light-gray);
    }

    .reference-section.show {
      display: block;
    }

    .reference-section ul {
      columns: 2;
      column-gap: 2rem;
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .reference-section li {
      padding: 0.25rem 0;
      break-inside: avoid;
      color: var(--color-dark-green);
    }

    .conversion-setup input[type="text"] {
      width: 60px;
      padding: 0.4rem 0.6rem;
      text-align: center;
      font-size: 1rem;
    }

    .conversion-setup .answer-input {
      width: 100px;
    }

    .unit-label {
      color: var(--color-medium-green);
      font-weight: 500;
    }

    .buttons {
      margin-top: 1rem;
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    @media (max-width: 600px) {
      .reference-section ul {
        columns: 1;
      }

      .conversion-setup input[type="text"] {
        width: 50px;
      }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="header-content">
      <a href="index.html" class="site-logo">
        <img src="logos/Mustafa Abdul Haque.svg" alt="Mustafa Abdul Haque">
      </a>
      <nav class="site-nav">
        <a href="index.html">Home</a>
        <a href="chemistry-balancing.html">Chemistry Balancing</a>
        <a href="chemistry-key-equations.html">Chemistry Equations</a>
        <a href="dimensional-analysis.html" class="active">Dimensional Analysis</a>
        <a href="ipa-learning-app.html">IPA Learning</a>
      </nav>
    </div>
  </header>

  <main class="main-content">
    <div class="page-title">
      <h1>Dimensional Analysis Practice</h1>
      <p class="subtitle">Master unit conversions with the factor-label method</p>
    </div>

    <div class="info-box info-box-primary mb-3">
      <strong>Instructions:</strong>
      <ul style="margin-top: 0.5rem; padding-left: 1.25rem;">
        <li>Use dimensional analysis (factor-label method) to solve each problem</li>
        <li>Units in numerator and denominator cancel when they match</li>
        <li>Arrange conversion factors so unwanted units cancel</li>
        <li>Click the reference sections below to see conversion factors</li>
      </ul>
    </div>

    <div class="tab-container">
      <button class="tab active" onclick="showTab('reference')">Reference</button>
      <button class="tab" onclick="showTab('part1')">Part I: Fill Numbers</button>
      <button class="tab" onclick="showTab('part2')">Part II: Full Setup</button>
    </div>

    <!-- REFERENCE TAB -->
    <div id="reference" class="tab-content active">
      <div id="reference-sections"></div>
    </div>

    <!-- PART I TAB -->
    <div id="part1" class="tab-content">
      <div class="section-header">
        <h2>Part I: Fill in the Numbers</h2>
        <p>The units are provided. Fill in the correct numbers to complete each conversion.</p>
      </div>
      <div id="part1-problems"></div>
    </div>

    <!-- PART II TAB -->
    <div id="part2" class="tab-content">
      <div class="section-header">
        <h2>Part II: Set Up the Conversion</h2>
        <p>Fill in both the numbers AND the units for each conversion factor.</p>
      </div>
      <div id="part2-problems"></div>
    </div>
  </main>

  <footer class="site-footer">
    <p>Mustafa Abdul Haque - Tutoring Resources</p>
  </footer>

<script>
// ============================================================================
// CONVERSION REFERENCE DATA
// ============================================================================
const referenceData = [
    {
        title: "Length",
        conversions: [
            "1 km = 1000 m",
            "1 m = 100 cm",
            "1 m = 1000 mm",
            "1 cm = 10 mm",
            "1 in = 2.54 cm",
            "1 ft = 12 in",
            "1 yd = 3 ft",
            "1 mi = 5280 ft",
            "1 mi = 1.609 km",
            "1 m = 3.281 ft",
            "1 ft = 0.305 m"
        ]
    },
    {
        title: "Mass",
        conversions: [
            "1 kg = 1000 g",
            "1 g = 1000 mg",
            "1 metric ton = 1000 kg",
            "1 lb = 453.592 g",
            "1 lb = 16 oz",
            "1 kg = 2.205 lb",
            "1 oz = 28.35 g",
            "1 stone = 14 lb"
        ]
    },
    {
        title: "Time",
        conversions: [
            "1 min = 60 s",
            "1 hr = 60 min",
            "1 hr = 3600 s",
            "1 day = 24 hr",
            "1 week = 7 days",
            "1 year = 365.25 days"
        ]
    },
    {
        title: "Volume",
        conversions: [
            "1 L = 1000 mL",
            "1 mL = 1 cm³",
            "1 m³ = 1000 L",
            "1 gal = 3.785 L",
            "1 gal = 4 qt",
            "1 qt = 2 pt",
            "1 pt = 2 cups",
            "1 cup = 8 fl oz",
            "1 fl oz = 29.57 mL"
        ]
    },
    {
        title: "Speed",
        conversions: [
            "1 m/s = 3.6 km/hr",
            "1 mph = 1.609 km/hr",
            "1 mph = 0.447 m/s",
            "1 knot = 1.852 km/hr",
            "1 ft/s = 0.305 m/s"
        ]
    },
    {
        title: "Energy",
        conversions: [
            "1 kJ = 1000 J",
            "1 cal = 4.184 J",
            "1 kcal = 1000 cal",
            "1 BTU = 1055 J",
            "1 kWh = 3,600,000 J"
        ]
    },
    {
        title: "Pressure",
        conversions: [
            "1 atm = 101,325 Pa",
            "1 atm = 760 mmHg",
            "1 atm = 14.7 psi",
            "1 bar = 100,000 Pa"
        ]
    },
    {
        title: "Area",
        conversions: [
            "1 m² = 10,000 cm²",
            "1 km² = 1,000,000 m²",
            "1 acre = 4047 m²",
            "1 m² = 10.76 ft²"
        ]
    },
    {
        title: "Power",
        conversions: [
            "1 kW = 1000 W",
            "1 hp = 746 W"
        ]
    },
    {
        title: "Force",
        conversions: [
            "1 lbf = 4.448 N",
            "1 kN = 1000 N"
        ]
    },
    {
        title: "Angles",
        conversions: [
            "1 revolution = 360°",
            "1 revolution = 2π rad",
            "180° = π rad"
        ]
    },
    {
        title: "Data",
        conversions: [
            "1 byte = 8 bits",
            "1 KB = 1024 bytes",
            "1 MB = 1024 KB",
            "1 GB = 1024 MB",
            "1 TB = 1024 GB"
        ]
    },
    {
        title: "Commodity Pricing",
        conversions: [
            "Gold: $65 per gram",
            "Gold: $2020 per troy oz",
            "Silver: $0.80 per gram",
            "Silver: $25 per troy oz",
            "Platinum: $32 per gram",
            "Copper: $0.009 per gram",
            "Copper: $9 per kg",
            "Aluminum: $2.50 per kg",
            "1 troy oz = 31.1 g",
            "1 lb = 14.58 troy oz"
        ]
    },
    {
        title: "Currency",
        conversions: [
            "$1 USD = €0.92 EUR",
            "$1 USD = £0.79 GBP",
            "$1 USD = ¥150 JPY",
            "$1 USD = $1.36 CAD",
            "$1 USD = $1.53 AUD"
        ]
    },
    {
        title: "Density",
        conversions: [
            "Gold: 19.3 g/cm³",
            "Silver: 10.5 g/cm³",
            "Platinum: 21.5 g/cm³",
            "Water: 1.0 g/mL",
            "Iron: 7.87 g/cm³",
            "Aluminum: 2.70 g/cm³",
            "Lead: 11.3 g/cm³"
        ]
    }
];

// ============================================================================
// PART I PROBLEMS
// ============================================================================
const part1Problems = [
    {
        question: "Convert 5.2 kilometers to meters.",
        startValue: "5.2",
        startUnit: "km",
        factors: [
            { num: "1000", numUnit: "m", den: "1", denUnit: "km" }
        ],
        finalUnit: "m",
        answer: "5200",
        explanation: "5.2 × 1000 = 5200"
    },
    {
        question: "Convert 6 feet to centimeters.",
        startValue: "6",
        startUnit: "ft",
        factors: [
            { num: "12", numUnit: "in", den: "1", denUnit: "ft" },
            { num: "2.54", numUnit: "cm", den: "1", denUnit: "in" }
        ],
        finalUnit: "cm",
        answer: "182.88",
        explanation: "6 × 12 × 2.54 = 182.88"
    },
    {
        question: "Convert 3500 grams to kilograms.",
        startValue: "3500",
        startUnit: "g",
        factors: [
            { num: "1", numUnit: "kg", den: "1000", denUnit: "g" }
        ],
        finalUnit: "kg",
        answer: "3.5",
        explanation: "3500 ÷ 1000 = 3.5"
    },
    {
        question: "Convert 2.5 hours to seconds.",
        startValue: "2.5",
        startUnit: "hr",
        factors: [
            { num: "60", numUnit: "min", den: "1", denUnit: "hr" },
            { num: "60", numUnit: "s", den: "1", denUnit: "min" }
        ],
        finalUnit: "s",
        answer: "9000",
        explanation: "2.5 × 60 × 60 = 9000"
    },
    {
        question: "Convert 15 miles to kilometers.",
        startValue: "15",
        startUnit: "mi",
        factors: [
            { num: "1.609", numUnit: "km", den: "1", denUnit: "mi" }
        ],
        finalUnit: "km",
        answer: "24.135",
        explanation: "15 × 1.609 = 24.135"
    },
    {
        question: "Convert 250 milliliters to liters.",
        startValue: "250",
        startUnit: "mL",
        factors: [
            { num: "1", numUnit: "L", den: "1000", denUnit: "mL" }
        ],
        finalUnit: "L",
        answer: "0.25",
        explanation: "250 ÷ 1000 = 0.25"
    },
    {
        question: "Convert 45 miles per hour to meters per second.",
        startValue: "45",
        startUnit: "mi/hr",
        factors: [
            { num: "1.609", numUnit: "km", den: "1", denUnit: "mi" },
            { num: "1000", numUnit: "m", den: "1", denUnit: "km" },
            { num: "1", numUnit: "hr", den: "60", denUnit: "min" },
            { num: "1", numUnit: "min", den: "60", denUnit: "s" }
        ],
        finalUnit: "m/s",
        answer: "20.1",
        explanation: "45 × 1.609 × 1000 ÷ 60 ÷ 60 = 20.1"
    },
    {
        question: "Convert 500 calories to joules.",
        startValue: "500",
        startUnit: "cal",
        factors: [
            { num: "4.184", numUnit: "J", den: "1", denUnit: "cal" }
        ],
        finalUnit: "J",
        answer: "2092",
        explanation: "500 × 4.184 = 2092"
    },
    {
        question: "Convert 3 gallons to milliliters.",
        startValue: "3",
        startUnit: "gal",
        factors: [
            { num: "3.785", numUnit: "L", den: "1", denUnit: "gal" },
            { num: "1000", numUnit: "mL", den: "1", denUnit: "L" }
        ],
        finalUnit: "mL",
        answer: "11355",
        explanation: "3 × 3.785 × 1000 = 11,355"
    },
    {
        question: "Convert 180 degrees to radians.",
        startValue: "180",
        startUnit: "°",
        factors: [
            { num: "π", numUnit: "rad", den: "180", denUnit: "°" }
        ],
        finalUnit: "rad",
        answer: "π",
        explanation: "180 × π ÷ 180 = π ≈ 3.14"
    },
    {
        question: "Convert 2.5 kilograms to ounces.",
        startValue: "2.5",
        startUnit: "kg",
        factors: [
            { num: "2.205", numUnit: "lb", den: "1", denUnit: "kg" },
            { num: "16", numUnit: "oz", den: "1", denUnit: "lb" }
        ],
        finalUnit: "oz",
        answer: "88.2",
        explanation: "2.5 × 2.205 × 16 = 88.2"
    },
    {
        question: "Convert 72 inches to meters.",
        startValue: "72",
        startUnit: "in",
        factors: [
            { num: "2.54", numUnit: "cm", den: "1", denUnit: "in" },
            { num: "1", numUnit: "m", den: "100", denUnit: "cm" }
        ],
        finalUnit: "m",
        answer: "1.83",
        explanation: "72 × 2.54 ÷ 100 = 1.83"
    },
    {
        question: "Convert 5 days to minutes.",
        startValue: "5",
        startUnit: "d",
        factors: [
            { num: "24", numUnit: "hr", den: "1", denUnit: "d" },
            { num: "60", numUnit: "min", den: "1", denUnit: "hr" }
        ],
        finalUnit: "min",
        answer: "7200",
        explanation: "5 × 24 × 60 = 7200"
    },
    {
        question: "Convert 2 atmospheres to pascals.",
        startValue: "2",
        startUnit: "atm",
        factors: [
            { num: "101325", numUnit: "Pa", den: "1", denUnit: "atm" }
        ],
        finalUnit: "Pa",
        answer: "202650",
        explanation: "2 × 101,325 = 202,650"
    },
    {
        question: "Convert 150 watts to horsepower.",
        startValue: "150",
        startUnit: "W",
        factors: [
            { num: "1", numUnit: "hp", den: "746", denUnit: "W" }
        ],
        finalUnit: "hp",
        answer: "0.201",
        explanation: "150 ÷ 746 = 0.201"
    },
    // ========== NEW DIFFICULT PROBLEMS ==========
    {
        question: "How much does 15 grams of gold cost in dollars?",
        startValue: "15",
        startUnit: "g gold",
        factors: [
            { num: "$65", numUnit: "", den: "1", denUnit: "g gold" }
        ],
        finalUnit: "$",
        answer: "975",
        explanation: "15 × $65/g = $975"
    },
    {
        question: "Convert 2 troy ounces of silver to grams.",
        startValue: "2",
        startUnit: "troy oz",
        factors: [
            { num: "31.1", numUnit: "g", den: "1", denUnit: "troy oz" }
        ],
        finalUnit: "g",
        answer: "62.2",
        explanation: "2 × 31.1 = 62.2"
    },
    {
        question: "A gold bar weighs 500 grams. What is its value in dollars?",
        startValue: "500",
        startUnit: "g gold",
        factors: [
            { num: "$65", numUnit: "", den: "1", denUnit: "g gold" }
        ],
        finalUnit: "$",
        answer: "32500",
        explanation: "500 × $65/g = $32,500"
    },
    {
        question: "Convert 100 grams of gold price from dollars to euros (€0.92 per $1).",
        startValue: "100",
        startUnit: "g gold",
        factors: [
            { num: "$65", numUnit: "", den: "1", denUnit: "g gold" },
            { num: "€0.92", numUnit: "", den: "$1", denUnit: "" }
        ],
        finalUnit: "€",
        answer: "5980",
        explanation: "100 × $65/g × €0.92/$1 = €5,980"
    },
    {
        question: "How many grams of silver can you buy with $200?",
        startValue: "200",
        startUnit: "$",
        factors: [
            { num: "1", numUnit: "g silver", den: "$0.80", denUnit: "" }
        ],
        finalUnit: "g silver",
        answer: "250",
        explanation: "$200 ÷ $0.80/g = 250 g"
    },
    {
        question: "A copper pipe weighs 2.5 kg. What is its material cost?",
        startValue: "2.5",
        startUnit: "kg copper",
        factors: [
            { num: "$9", numUnit: "", den: "1", denUnit: "kg copper" }
        ],
        finalUnit: "$",
        answer: "22.5",
        explanation: "2.5 × $9/kg = $22.50"
    },
    {
        question: "Convert 1 pound of gold to troy ounces.",
        startValue: "1",
        startUnit: "lb",
        factors: [
            { num: "14.58", numUnit: "troy oz", den: "1", denUnit: "lb" }
        ],
        finalUnit: "troy oz",
        answer: "14.58",
        explanation: "1 × 14.58 = 14.58"
    },
    {
        question: "What volume does 100 grams of gold occupy? (Density = 19.3 g/cm³)",
        startValue: "100",
        startUnit: "g",
        factors: [
            { num: "1", numUnit: "cm³", den: "19.3", denUnit: "g" }
        ],
        finalUnit: "cm³",
        answer: "5.18",
        explanation: "100 ÷ 19.3 = 5.18"
    },
    {
        question: "A silver coin has a volume of 2.5 cm³. What is its mass? (Density = 10.5 g/cm³)",
        startValue: "2.5",
        startUnit: "cm³",
        factors: [
            { num: "10.5", numUnit: "g", den: "1", denUnit: "cm³" }
        ],
        finalUnit: "g",
        answer: "26.25",
        explanation: "2.5 × 10.5 = 26.25"
    },
    {
        question: "Convert $500 USD to Japanese Yen (¥150 per $1).",
        startValue: "500",
        startUnit: "$",
        factors: [
            { num: "¥150", numUnit: "", den: "$1", denUnit: "" }
        ],
        finalUnit: "¥",
        answer: "75000",
        explanation: "500 × ¥150/$1 = ¥75,000"
    }
];

// ============================================================================
// PART II PROBLEMS
// ============================================================================
const part2Problems = [
    {
        question: "Convert 8.5 miles to meters.",
        startValue: "8.5",
        startUnit: "mi",
        numFactors: 2,
        finalUnit: "m",
        answer: "13677",
        solutionFactors: [
            { num: "1.609", numUnit: "km", den: "1", denUnit: "mi" },
            { num: "1000", numUnit: "m", den: "1", denUnit: "km" }
        ],
        explanation: "8.5 × 1.609 × 1000 = 13,677"
    },
    {
        question: "Convert 175 pounds to kilograms.",
        startValue: "175",
        startUnit: "lb",
        numFactors: 1,
        finalUnit: "kg",
        answer: "79.4",
        solutionFactors: [
            { num: "1", numUnit: "kg", den: "2.205", denUnit: "lb" }
        ],
        explanation: "175 ÷ 2.205 = 79.4"
    },
    {
        question: "Convert 3 weeks to hours.",
        startValue: "3",
        startUnit: "wk",
        numFactors: 2,
        finalUnit: "hr",
        answer: "504",
        solutionFactors: [
            { num: "7", numUnit: "d", den: "1", denUnit: "wk" },
            { num: "24", numUnit: "hr", den: "1", denUnit: "d" }
        ],
        explanation: "3 × 7 × 24 = 504"
    },
    {
        question: "Convert 2.5 gallons to cups.",
        startValue: "2.5",
        startUnit: "gal",
        numFactors: 3,
        finalUnit: "cups",
        answer: "40",
        solutionFactors: [
            { num: "4", numUnit: "qt", den: "1", denUnit: "gal" },
            { num: "2", numUnit: "pt", den: "1", denUnit: "qt" },
            { num: "2", numUnit: "cups", den: "1", denUnit: "pt" }
        ],
        explanation: "2.5 × 4 × 2 × 2 = 40"
    },
    {
        question: "Convert 500 BTU to kilojoules.",
        startValue: "500",
        startUnit: "BTU",
        numFactors: 2,
        finalUnit: "kJ",
        answer: "527.5",
        solutionFactors: [
            { num: "1055", numUnit: "J", den: "1", denUnit: "BTU" },
            { num: "1", numUnit: "kJ", den: "1000", denUnit: "J" }
        ],
        explanation: "500 × 1055 ÷ 1000 = 527.5"
    },
    {
        question: "Convert 45 centimeters to inches.",
        startValue: "45",
        startUnit: "cm",
        numFactors: 1,
        finalUnit: "in",
        answer: "17.7",
        solutionFactors: [
            { num: "1", numUnit: "in", den: "2.54", denUnit: "cm" }
        ],
        explanation: "45 ÷ 2.54 = 17.7"
    },
    {
        question: "Convert 250 horsepower to kilowatts.",
        startValue: "250",
        startUnit: "hp",
        numFactors: 2,
        finalUnit: "kW",
        answer: "186.5",
        solutionFactors: [
            { num: "746", numUnit: "W", den: "1", denUnit: "hp" },
            { num: "1", numUnit: "kW", den: "1000", denUnit: "W" }
        ],
        explanation: "250 × 746 ÷ 1000 = 186.5"
    },
    {
        question: "Convert 4 acres to square meters.",
        startValue: "4",
        startUnit: "acres",
        numFactors: 1,
        finalUnit: "m²",
        answer: "16188",
        solutionFactors: [
            { num: "4047", numUnit: "m²", den: "1", denUnit: "acre" }
        ],
        explanation: "4 × 4047 = 16,188"
    },
    {
        question: "Convert 32 gigabytes to megabytes.",
        startValue: "32",
        startUnit: "GB",
        numFactors: 1,
        finalUnit: "MB",
        answer: "32768",
        solutionFactors: [
            { num: "1024", numUnit: "MB", den: "1", denUnit: "GB" }
        ],
        explanation: "32 × 1024 = 32,768"
    },
    {
        question: "Convert 720 degrees to revolutions.",
        startValue: "720",
        startUnit: "°",
        numFactors: 1,
        finalUnit: "rev",
        answer: "2",
        solutionFactors: [
            { num: "1", numUnit: "rev", den: "360", denUnit: "°" }
        ],
        explanation: "720 ÷ 360 = 2"
    },
    {
        question: "Convert 2.5 kilocalories to joules.",
        startValue: "2.5",
        startUnit: "kcal",
        numFactors: 2,
        finalUnit: "J",
        answer: "10460",
        solutionFactors: [
            { num: "1000", numUnit: "cal", den: "1", denUnit: "kcal" },
            { num: "4.184", numUnit: "J", den: "1", denUnit: "cal" }
        ],
        explanation: "2.5 × 1000 × 4.184 = 10,460"
    },
    {
        question: "Convert 12 stone to kilograms.",
        startValue: "12",
        startUnit: "stone",
        numFactors: 2,
        finalUnit: "kg",
        answer: "76.2",
        solutionFactors: [
            { num: "14", numUnit: "lb", den: "1", denUnit: "stone" },
            { num: "1", numUnit: "kg", den: "2.205", denUnit: "lb" }
        ],
        explanation: "12 × 14 ÷ 2.205 = 76.2"
    },
    // ========== NEW CHALLENGING PROBLEMS ==========
    {
        question: "Calculate the value of 1 pound of gold in dollars. (1 lb = 14.58 troy oz, Gold = $2020/troy oz)",
        startValue: "1",
        startUnit: "lb gold",
        numFactors: 2,
        finalUnit: "$",
        answer: "29451.6",
        solutionFactors: [
            { num: "14.58", numUnit: "troy oz", den: "1", denUnit: "lb" },
            { num: "$2020", numUnit: "", den: "1", denUnit: "troy oz" }
        ],
        explanation: "1 × 14.58 × $2020 = $29,451.60"
    },
    {
        question: "A jeweler has 50 grams of silver. What is its value in British Pounds? ($0.80/g, £0.79 per $1)",
        startValue: "50",
        startUnit: "g silver",
        numFactors: 2,
        finalUnit: "£",
        answer: "31.6",
        solutionFactors: [
            { num: "$0.80", numUnit: "", den: "1", denUnit: "g silver" },
            { num: "£0.79", numUnit: "", den: "$1", denUnit: "" }
        ],
        explanation: "50 × $0.80/g × £0.79/$1 = £31.60"
    },
    {
        question: "How many cm³ of gold is worth $10,000? (Gold = $65/g, Density = 19.3 g/cm³)",
        startValue: "10000",
        startUnit: "$",
        numFactors: 2,
        finalUnit: "cm³",
        answer: "7.97",
        solutionFactors: [
            { num: "1", numUnit: "g gold", den: "$65", denUnit: "" },
            { num: "1", numUnit: "cm³", den: "19.3", denUnit: "g" }
        ],
        explanation: "$10,000 ÷ $65/g ÷ 19.3 g/cm³ = 7.97 cm³"
    },
    {
        question: "A 5 cm³ cube of platinum weighs how many grams? (Platinum density ≈ 21.5 g/cm³)",
        startValue: "5",
        startUnit: "cm³",
        numFactors: 1,
        finalUnit: "g",
        answer: "107.5",
        solutionFactors: [
            { num: "21.5", numUnit: "g", den: "1", denUnit: "cm³" }
        ],
        explanation: "5 × 21.5 = 107.5 g"
    },
    {
        question: "Convert 500 Japanese Yen to Canadian Dollars. (¥150 = $1 USD, $1 USD = $1.36 CAD)",
        startValue: "500",
        startUnit: "¥",
        numFactors: 2,
        finalUnit: "CAD",
        answer: "4.53",
        solutionFactors: [
            { num: "$1", numUnit: "USD", den: "¥150", denUnit: "" },
            { num: "$1.36", numUnit: "CAD", den: "$1", denUnit: "USD" }
        ],
        explanation: "¥500 ÷ ¥150/$1 × $1.36 CAD/$1 = $4.53 CAD"
    },
    {
        question: "A copper wire is 250 meters long and has a mass of 1.2 kg. What is the total material cost? ($9/kg copper)",
        startValue: "1.2",
        startUnit: "kg copper",
        numFactors: 1,
        finalUnit: "$",
        answer: "10.8",
        solutionFactors: [
            { num: "$9", numUnit: "", den: "1", denUnit: "kg copper" }
        ],
        explanation: "1.2 × $9/kg = $10.80"
    },
    {
        question: "How much aluminum (in grams) can you buy for $50 if aluminum costs $2.50 per kg?",
        startValue: "50",
        startUnit: "$",
        numFactors: 2,
        finalUnit: "g",
        answer: "20000",
        solutionFactors: [
            { num: "1", numUnit: "kg", den: "$2.50", denUnit: "" },
            { num: "1000", numUnit: "g", den: "1", denUnit: "kg" }
        ],
        explanation: "$50 ÷ $2.50/kg × 1000 g/kg = 20,000 g"
    },
    {
        question: "A lead brick has a volume of 500 cm³. What is its mass in pounds? (Lead density = 11.3 g/cm³, 1 lb = 453.592 g)",
        startValue: "500",
        startUnit: "cm³",
        numFactors: 2,
        finalUnit: "lb",
        answer: "12.45",
        solutionFactors: [
            { num: "11.3", numUnit: "g", den: "1", denUnit: "cm³" },
            { num: "1", numUnit: "lb", den: "453.592", denUnit: "g" }
        ],
        explanation: "500 × 11.3 ÷ 453.592 = 12.45 lb"
    },
    {
        question: "An iron beam weighs 150 kg. What volume does it occupy in liters? (Iron density = 7.87 g/cm³, 1 L = 1000 cm³)",
        startValue: "150",
        startUnit: "kg",
        numFactors: 3,
        finalUnit: "L",
        answer: "19.1",
        solutionFactors: [
            { num: "1000", numUnit: "g", den: "1", denUnit: "kg" },
            { num: "1", numUnit: "cm³", den: "7.87", denUnit: "g" },
            { num: "1", numUnit: "L", den: "1000", denUnit: "cm³" }
        ],
        explanation: "150 × 1000 ÷ 7.87 ÷ 1000 = 19.1 L"
    },
    {
        question: "Gold costs $2020 per troy oz. How much is 1 kilogram of gold worth? (1 troy oz = 31.1 g)",
        startValue: "1",
        startUnit: "kg gold",
        numFactors: 2,
        finalUnit: "$",
        answer: "64951.8",
        solutionFactors: [
            { num: "1000", numUnit: "g", den: "1", denUnit: "kg" },
            { num: "$2020", numUnit: "", den: "31.1", denUnit: "g" }
        ],
        explanation: "1 × 1000 ÷ 31.1 × $2020 = $64,951.77"
    },
    {
        question: "A water tank holds 500 gallons. What is its capacity in cubic meters? (1 gal = 3.785 L, 1 m³ = 1000 L)",
        startValue: "500",
        startUnit: "gal",
        numFactors: 2,
        finalUnit: "m³",
        answer: "1.89",
        solutionFactors: [
            { num: "3.785", numUnit: "L", den: "1", denUnit: "gal" },
            { num: "1", numUnit: "m³", den: "1000", denUnit: "L" }
        ],
        explanation: "500 × 3.785 ÷ 1000 = 1.89 m³"
    },
    {
        question: "A car travels at 75 mph. How many feet does it travel in 1 second? (1 mi = 5280 ft, 1 hr = 3600 s)",
        startValue: "75",
        startUnit: "mi/hr",
        numFactors: 2,
        finalUnit: "ft/s",
        answer: "110",
        solutionFactors: [
            { num: "5280", numUnit: "ft", den: "1", denUnit: "mi" },
            { num: "1", numUnit: "hr", den: "3600", denUnit: "s" }
        ],
        explanation: "75 × 5280 ÷ 3600 = 110 ft/s"
    }
];

// ============================================================================
// RENDERING FUNCTIONS
// ============================================================================
function renderReference() {
    const container = document.getElementById('reference-sections');
    container.innerHTML = referenceData.map((section, idx) => `
        <div class="collapsible-header" onclick="toggleSection(${idx})" id="header-${idx}">
            <h3>${section.title}</h3>
        </div>
        <div id="ref-section-${idx}" class="reference-section">
            <ul>
                ${section.conversions.map(c => `<li>${c}</li>`).join('')}
            </ul>
        </div>
    `).join('');
}

function toggleSection(idx) {
    const section = document.getElementById(`ref-section-${idx}`);
    const header = document.getElementById(`header-${idx}`);
    section.classList.toggle('show');
    header.classList.toggle('open');
}

function renderPart1() {
    const container = document.getElementById('part1-problems');
    container.innerHTML = part1Problems.map((p, idx) => {
        const factorsHTML = p.factors.map((f, fIdx) => `
            <span class="times">×</span>
            <div class="fraction">
                <div class="fraction-num">
                    <input type="text" id="p1-${idx}-f${fIdx}-num" data-answer="${f.num}"> ${f.numUnit}
                </div>
                <div class="fraction-line"></div>
                <div class="fraction-den">
                    <input type="text" id="p1-${idx}-f${fIdx}-den" data-answer="${f.den}"> ${f.denUnit}
                </div>
            </div>
        `).join('');

        return `
            <div class="problem card">
                <span class="problem-number">${idx + 1}.</span>
                <span class="problem-text">${p.question}</span>
                <div class="conversion-setup">
                    <span>${p.startValue} ${p.startUnit}</span>
                    ${factorsHTML}
                    <span class="equals">=</span>
                    <input type="text" class="answer-input" id="p1-${idx}-ans" data-answer="${p.answer}">
                    <span class="unit-label">${p.finalUnit}</span>
                </div>
                <div class="buttons">
                    <button class="btn btn-primary" onclick="checkPart1(${idx})">Check</button>
                    <button class="btn btn-secondary" onclick="showSolution('p1-sol-${idx}')">Show Solution</button>
                </div>
                <div id="p1-sol-${idx}" class="solution">
                    <span class="solution-label">Solution:</span><br>
                    ${p.startValue} ${p.startUnit} ${p.factors.map(f => `× (${f.num} ${f.numUnit} / ${f.den} ${f.denUnit})`).join(' ')} = <strong>${p.answer} ${p.finalUnit}</strong><br>
                    <em>${p.explanation}</em>
                </div>
            </div>
        `;
    }).join('');
}

function renderPart2() {
    const container = document.getElementById('part2-problems');
    container.innerHTML = part2Problems.map((p, idx) => {
        let factorsHTML = '';
        for (let i = 0; i < p.numFactors; i++) {
            factorsHTML += `
                <span class="times">×</span>
                <div class="fraction">
                    <div class="fraction-num">
                        <input type="text" id="p2-${idx}-f${i}-num" placeholder="#">
                        <input type="text" id="p2-${idx}-f${i}-numU" placeholder="unit">
                    </div>
                    <div class="fraction-line"></div>
                    <div class="fraction-den">
                        <input type="text" id="p2-${idx}-f${i}-den" placeholder="#">
                        <input type="text" id="p2-${idx}-f${i}-denU" placeholder="unit">
                    </div>
                </div>
            `;
        }

        const solutionSetup = p.solutionFactors.map(f =>
            `× (${f.num} ${f.numUnit} / ${f.den} ${f.denUnit})`
        ).join(' ');

        return `
            <div class="problem card">
                <span class="problem-number">${idx + 1}.</span>
                <span class="problem-text">${p.question}</span>
                <div class="conversion-setup">
                    <span>${p.startValue} ${p.startUnit}</span>
                    ${factorsHTML}
                    <span class="equals">=</span>
                    <input type="text" class="answer-input" id="p2-${idx}-ans" data-answer="${p.answer}">
                    <span class="unit-label">${p.finalUnit}</span>
                </div>
                <div class="buttons">
                    <button class="btn btn-primary" onclick="checkPart2Answer(${idx})">Check Answer</button>
                    <button class="btn btn-secondary" onclick="showSolution('p2-sol-${idx}')">Show Solution</button>
                </div>
                <div id="p2-sol-${idx}" class="solution">
                    <span class="solution-label">Solution:</span><br>
                    ${p.startValue} ${p.startUnit} ${solutionSetup} = <strong>${p.answer} ${p.finalUnit}</strong><br>
                    <em>${p.explanation}</em>
                </div>
            </div>
        `;
    }).join('');
}

function checkPart1(idx) {
    const p = part1Problems[idx];
    p.factors.forEach((f, fIdx) => {
        checkInput(`p1-${idx}-f${fIdx}-num`, f.num);
        checkInput(`p1-${idx}-f${fIdx}-den`, f.den);
    });
    checkInput(`p1-${idx}-ans`, p.answer);
}

function checkPart2Answer(idx) {
    const p = part2Problems[idx];
    checkInput(`p2-${idx}-ans`, p.answer);
}

function checkInput(id, correctAnswer) {
    const input = document.getElementById(id);
    const userValue = input.value.trim().toLowerCase();
    const correct = String(correctAnswer).toLowerCase();

    let isCorrect = false;

    if (userValue === correct) {
        isCorrect = true;
    } else if (correct === 'π' && (userValue === 'pi' || userValue === '3.14' || userValue === '3.1416')) {
        isCorrect = true;
    } else {
        const userNum = parseFloat(userValue.replace(/,/g, ''));
        const correctNum = parseFloat(correct.replace(/,/g, ''));
        if (!isNaN(userNum) && !isNaN(correctNum)) {
            const diff = Math.abs(userNum - correctNum) / correctNum;
            if (diff < 0.01) isCorrect = true;
        }
    }

    input.classList.remove('correct', 'incorrect');
    input.classList.add(isCorrect ? 'correct' : 'incorrect');
}

function showSolution(id) {
    const sol = document.getElementById(id);
    sol.classList.toggle('show');
}

function showTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));

    document.getElementById(tabId).classList.add('active');
    event.target.classList.add('active');
}

// Initialize
renderReference();
renderPart1();
renderPart2();
</script>
  <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="mahaque" data-description="Support me on Buy me a coffee!" data-message="I hope these resources helped you! It takes me a while to come up with ways to help students succeed, so your support is greatly appreciated!" data-color="#40DCA5" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
</body>
</html>
