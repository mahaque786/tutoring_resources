<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Equation Chooser Trainer - Mustafa Abdul Haque</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/svg+xml" href="logos/ICON ONLY Mustafa Abdul Haque (Logo).svg">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Page-specific styles */
    .quiz-app {
      min-height: calc(100vh - 140px);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      background: var(--color-light-gray);
    }

    .quiz-shell {
      width: 100%;
      max-width: 880px;
      background: var(--color-white);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-light-gray);
      box-shadow: var(--shadow-lg);
      padding: 1.5rem;
    }

    .quiz-header {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.25rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--color-light-gray);
    }

    .quiz-title-block {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .quiz-icon {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: var(--color-medium-green);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: white;
      font-weight: 700;
    }

    .quiz-title-main {
      font-size: 1.15rem;
      font-weight: 600;
      color: var(--color-dark-green);
    }

    .quiz-title-sub {
      font-size: 0.85rem;
      color: var(--color-medium-green);
    }

    .quiz-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: flex-end;
      align-items: center;
    }

    .quiz-select-wrapper {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 0.4rem 0.75rem;
      border-radius: 999px;
      border: 1px solid var(--color-light-gray);
      background: var(--color-white);
      font-size: 0.85rem;
      color: var(--color-medium-green);
    }

    .quiz-select-wrapper select {
      background: transparent;
      border: none;
      color: var(--color-dark-green);
      font-size: 0.85rem;
      outline: none;
      padding: 2px 4px;
      cursor: pointer;
    }

    .quiz-stats-chip {
      padding: 0.4rem 0.75rem;
      border-radius: 999px;
      border: 1px solid var(--color-light-gray);
      background: var(--color-white);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.85rem;
    }

    .quiz-badge {
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      background: var(--color-gold);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: white;
      font-weight: 600;
    }

    .quiz-card {
      border-radius: var(--radius-md);
      background: var(--color-light-gray);
      padding: 1.25rem;
      border: 1px solid #c9cec3;
    }

    .quiz-progress-bar {
      position: relative;
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: var(--color-white);
      overflow: hidden;
      margin-bottom: 0.75rem;
    }

    .quiz-progress-inner {
      height: 100%;
      width: 0%;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--color-medium-green), var(--color-gold));
      transition: width 0.25s ease;
    }

    .quiz-meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px 10px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.75rem;
      font-size: 0.85rem;
      color: var(--color-medium-green);
    }

    .quiz-meta-main {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .quiz-dot {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: var(--color-medium-green);
    }

    .quiz-difficulty {
      padding: 0.2rem 0.5rem;
      border-radius: 999px;
      background: var(--color-white);
      border: 1px solid var(--color-light-gray);
      font-family: monospace;
      font-size: 0.8rem;
    }

    .quiz-question-block {
      border-radius: var(--radius-sm);
      background: var(--color-white);
      border: 1px solid #c9cec3;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .quiz-tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 0.5rem;
    }

    .quiz-mini-tag {
      font-size: 0.7rem;
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      border: 1px solid var(--color-medium-green);
      background: rgba(76, 107, 60, 0.1);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-medium-green);
    }

    .quiz-question-text {
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .quiz-question-text p {
      margin: 0 0 0.25rem;
    }

    .quiz-given,
    .quiz-find {
      display: flex;
      gap: 4px;
    }

    .quiz-given strong,
    .quiz-find strong {
      color: var(--color-dark-green);
      min-width: 46px;
    }

    .quiz-main-prompt {
      margin-top: 0.5rem;
      color: var(--color-medium-green);
      font-size: 0.9rem;
    }

    .quiz-options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }

    @media (min-width: 700px) {
      .quiz-options {
        grid-template-columns: 1fr 1fr;
      }
    }

    .quiz-option {
      position: relative;
      text-align: left;
      width: 100%;
      border-radius: var(--radius-sm);
      padding: 0.75rem 0.75rem 0.75rem 2.5rem;
      border: 2px solid var(--color-light-gray);
      background: var(--color-white);
      color: var(--color-dark-green);
      cursor: pointer;
      font-size: 0.9rem;
      line-height: 1.4;
      transition: all var(--transition);
      font-family: var(--font-body);
    }

    .quiz-option::before {
      content: attr(data-letter);
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 1px solid var(--color-light-gray);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      color: var(--color-medium-green);
      background: var(--color-white);
    }

    .quiz-option:hover:not(.disabled) {
      border-color: var(--color-medium-green);
      background: rgba(76, 107, 60, 0.05);
    }

    .quiz-option.correct {
      border-color: var(--color-medium-green);
      background: rgba(76, 107, 60, 0.15);
    }

    .quiz-option.correct::before {
      border-color: var(--color-medium-green);
      background: var(--color-medium-green);
      color: white;
    }

    .quiz-option.incorrect {
      border-color: #c44536;
      background: rgba(196, 69, 54, 0.1);
    }

    .quiz-option.incorrect::before {
      border-color: #c44536;
      background: rgba(196, 69, 54, 0.2);
      color: #c44536;
    }

    .quiz-option.disabled {
      cursor: default;
      pointer-events: none;
      opacity: 0.9;
    }

    .quiz-option small {
      display: block;
      font-size: 0.75rem;
      margin-top: 0.2rem;
      color: var(--color-medium-green);
    }

    .quiz-feedback {
      margin-bottom: 0.75rem;
      padding: 0.75rem 1rem;
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      line-height: 1.5;
      border: 1px solid transparent;
      display: none;
    }

    .quiz-feedback.visible {
      display: block;
    }

    .quiz-feedback.correct {
      border-color: var(--color-medium-green);
      background: rgba(76, 107, 60, 0.15);
      color: var(--color-dark-green);
    }

    .quiz-feedback.incorrect {
      border-color: #c44536;
      background: rgba(196, 69, 54, 0.1);
      color: #8b3228;
    }

    .quiz-footer-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.5rem;
    }

    .quiz-footer-left {
      font-size: 0.8rem;
      color: var(--color-medium-green);
    }

    .quiz-button-row {
      display: flex;
      gap: 0.5rem;
    }

    .quiz-summary {
      margin-top: 0.75rem;
      border-radius: var(--radius-sm);
      padding: 0.75rem 1rem;
      background: rgba(163, 143, 90, 0.15);
      border: 1px dashed var(--color-gold);
      font-size: 0.85rem;
      display: none;
    }

    .quiz-summary.visible {
      display: block;
    }

    .quiz-summary-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem 1rem;
      align-items: center;
      justify-content: space-between;
    }

    .quiz-summary-main {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }

    .quiz-summary-main strong {
      font-size: 0.9rem;
      color: var(--color-dark-green);
    }

    .quiz-pill-soft {
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: var(--color-white);
      border: 1px solid var(--color-light-gray);
      font-size: 0.75rem;
      color: var(--color-medium-green);
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="header-content">
      <a href="index.html" class="site-logo">
        <img src="logos/Mustafa Abdul Haque.svg" alt="Mustafa Abdul Haque">
      </a>
      <nav class="site-nav">
        <a href="index.html">Home</a>
        <a href="chemistry-balancing.html">Chemistry Balancing</a>
        <a href="chemistry-key-equations.html">Chemistry Equations</a>
        <a href="dimensional-analysis.html">Dimensional Analysis</a>
        <a href="ipa-learning-app.html">IPA Learning</a>
      </nav>
    </div>
  </header>

  <div class="quiz-app">
    <div class="quiz-shell">
      <div class="quiz-header">
        <div class="quiz-title-block">
          <div class="quiz-icon">f</div>
          <div>
            <div class="quiz-title-main">Equation Chooser Trainer</div>
            <div class="quiz-title-sub">Practice picking the right formula from what's given and what to find.</div>
          </div>
        </div>
        <div class="quiz-controls">
          <div class="quiz-select-wrapper">
            <label for="eqz-topic-select">Topic</label>
            <select id="eqz-topic-select">
              <option value="all">All topics</option>
            </select>
          </div>
          <div class="quiz-stats-chip">
            <div class="quiz-badge">MC Quiz</div>
            <span id="eqz-score-chip">Score: 0 / 0</span>
          </div>
        </div>
      </div>

      <div class="quiz-card">
        <div class="quiz-progress-bar">
          <div class="quiz-progress-inner" id="eqz-progress-inner"></div>
        </div>

        <div class="quiz-meta-row">
          <div class="quiz-meta-main">
            <span id="eqz-question-counter">Question 1 of 1</span>
            <span class="quiz-dot"></span>
            <span id="eqz-topic-label">Topic: -</span>
          </div>
          <div class="quiz-difficulty" id="eqz-difficulty-label">Difficulty: -</div>
        </div>

        <div class="quiz-question-block">
          <div class="quiz-tag-row">
            <div class="quiz-mini-tag">Given / Find</div>
            <div class="quiz-mini-tag">Pick the equation</div>
          </div>
          <div class="quiz-question-text">
            <p class="quiz-given"><strong>Given:</strong> <span id="eqz-given-text"></span></p>
            <p class="quiz-find"><strong>Find:</strong> <span id="eqz-find-text"></span></p>
            <p class="quiz-main-prompt" id="eqz-main-prompt"></p>
          </div>
        </div>

        <div class="quiz-options" id="eqz-options"></div>

        <div class="quiz-feedback" id="eqz-feedback"></div>

        <div class="quiz-footer-row">
          <div class="quiz-footer-left" id="eqz-footer-status">
            Click an answer to check your choice.
          </div>
          <div class="quiz-button-row">
            <button class="btn btn-secondary" id="eqz-skip-btn" type="button">Skip / New</button>
            <button class="btn btn-primary" id="eqz-next-btn" type="button" disabled>Next question</button>
          </div>
        </div>
      </div>

      <div class="quiz-summary" id="eqz-summary">
        <div class="quiz-summary-row">
          <div class="quiz-summary-main">
            <strong>Session summary</strong>
            <span class="quiz-pill-soft" id="eqz-summary-score"></span>
          </div>
          <div class="quiz-summary-main">
            <span class="quiz-pill-soft" id="eqz-summary-accuracy"></span>
            <span class="quiz-pill-soft" id="eqz-summary-topic"></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <p>Mustafa Abdul Haque - Tutoring Resources</p>
    <p>
      <a href='https://ko-fi.com/N4N81TSGSY' target='_blank' rel='noopener noreferrer'><img style='border:0px;height:36px;' src='https://storage.ko-fi.com/cdn/kofi2.png?v=3' alt='Buy Me a Coffee at ko-fi.com' /></a>
    </p>
  </footer>

<script>
(function () {
  const EQZ_QUESTIONS = [
    { id: 1, topic: "Circles", difficulty: 1, given: "radius r of a circle", find: "circumference C of the circle", prompt: "Which equation directly relates the circumference C to the radius r?", choices: [{ text: "C = 2\u03c0r", correct: true, why: "Circumference equals 2\u03c0 times the radius." }, { text: "C = \u03c0r\u00b2", correct: false, why: "\u03c0r\u00b2 is the area formula, not the circumference." }, { text: "C = r\u00b2", correct: false, why: "Missing \u03c0 and the factor 2, and has wrong units." }, { text: "C = \u03c0d\u00b2", correct: false, why: "This mixes ideas; the diameter is not squared in the formula." }] },
    { id: 2, topic: "Circles", difficulty: 1, given: "diameter d of a circle", find: "circumference C of the circle", prompt: "Pick the formula that uses the diameter d to get the circumference C.", choices: [{ text: "C = \u03c0d", correct: true, why: "Circumference in terms of diameter is C = \u03c0d." }, { text: "C = 2\u03c0d", correct: false, why: "2\u03c0r = \u03c0d, adding another 2 is incorrect." }, { text: "C = d\u00b2", correct: false, why: "No \u03c0 and wrong structure; not a circumference formula." }, { text: "C = \u03c0r\u00b2", correct: false, why: "That's the area in terms of radius, not circumference." }] },
    { id: 3, topic: "Circles", difficulty: 1, given: "radius r of a circle", find: "area A of the circle", prompt: "Which equation connects area A with radius r?", choices: [{ text: "A = \u03c0r\u00b2", correct: true, why: "The area of a circle is \u03c0 times radius squared." }, { text: "A = 2\u03c0r", correct: false, why: "2\u03c0r is the circumference, not the area." }, { text: "A = 4\u03c0r", correct: false, why: "Incorrect factor and missing square on the radius." }, { text: "A = r/\u03c0", correct: false, why: "This doesn't match any standard circle formula." }] },
    { id: 4, topic: "Circles", difficulty: 2, given: "circumference C of a circle", find: "radius r of the circle", prompt: "You know the circumference C and want the radius r. Which equation isolates r?", choices: [{ text: "r = C / (2\u03c0)", correct: true, why: "Solve C = 2\u03c0r for r to get r = C / (2\u03c0)." }, { text: "r = C / \u03c0", correct: false, why: "That would give diameter, not radius." }, { text: "r = 2\u03c0C", correct: false, why: "You inverted the relationship incorrectly." }, { text: "r = C\u00b2 / \u03c0", correct: false, why: "No squaring is needed to isolate r." }] },
    { id: 5, topic: "Perimeter & Area", difficulty: 1, given: "length L and width W of a rectangle", find: "perimeter P of the rectangle", prompt: "Which equation gives the perimeter P from length L and width W?", choices: [{ text: "P = 2L + 2W", correct: true, why: "Perimeter adds all four sides: L+L+W+W." }, { text: "P = LW", correct: false, why: "LW is the area, not the perimeter." }, { text: "P = L + W", correct: false, why: "Only adds one length and one width." }, { text: "P = 4LW", correct: false, why: "Multiplying length and width is incorrect for perimeter." }] },
    { id: 6, topic: "Perimeter & Area", difficulty: 1, given: "base b and height h of a triangle", find: "area A of the triangle", prompt: "Choose the formula that uses base b and height h to find the area A.", choices: [{ text: "A = 1/2 bh", correct: true, why: "Triangle area is half of base times height." }, { text: "A = bh", correct: false, why: "You must divide by 2 for a triangle." }, { text: "A = 2bh", correct: false, why: "This is double the correct area." }, { text: "A = b + h", correct: false, why: "Adding gives only a length, not an area." }] },
    { id: 7, topic: "Perimeter & Area", difficulty: 2, given: "area A of a rectangle and width W", find: "length L of the rectangle", prompt: "You know A and W, and want to solve for L. Which equation is correct?", choices: [{ text: "L = A / W", correct: true, why: "From A = LW, divide both sides by W." }, { text: "L = A \u00b7 W", correct: false, why: "Multiplication makes the value too large." }, { text: "L = A - W", correct: false, why: "Subtraction doesn't match A = LW." }, { text: "L = W / A", correct: false, why: "This is the reciprocal of the correct relationship." }] },
    { id: 8, topic: "Linear Equations", difficulty: 1, given: "slope m and y-intercept b of a line", find: "equation of the line", prompt: "Which equation form directly uses slope m and y-intercept b?", choices: [{ text: "y = mx + b", correct: true, why: "Slope-intercept form uses m and b directly." }, { text: "y - y\u2081 = m(x - x\u2081)", correct: false, why: "This uses a point (x\u2081, y\u2081), not the y-intercept explicitly." }, { text: "Ax + By = C", correct: false, why: "Standard form doesn't show m and b directly." }, { text: "x = my + b", correct: false, why: "Variables are flipped; not the usual slope-intercept equation." }] },
    { id: 9, topic: "Linear Equations", difficulty: 2, given: "two points (x\u2081, y\u2081) and (x\u2082, y\u2082)", find: "slope m of the line through them", prompt: "Select the equation that correctly finds the slope m from two points.", choices: [{ text: "m = (y\u2082 - y\u2081) / (x\u2082 - x\u2081)", correct: true, why: "Slope is change in y over change in x." }, { text: "m = (x\u2082 - x\u2081) / (y\u2082 - y\u2081)", correct: false, why: "This inverts the slope formula." }, { text: "m = x\u2082 - x\u2081", correct: false, why: "Missing the change in y; not a ratio." }, { text: "m = y\u2082 + y\u2081", correct: false, why: "Adding y-values doesn't give the slope." }] },
    { id: 10, topic: "Linear Equations", difficulty: 2, given: "slope m and a point (x\u2081, y\u2081)", find: "equation of the line", prompt: "Which equation form uses the slope m and a point (x\u2081, y\u2081) directly?", choices: [{ text: "y - y\u2081 = m(x - x\u2081)", correct: true, why: "This is the point-slope form." }, { text: "y = mx + b", correct: false, why: "This form uses m and b, not the point (x\u2081, y\u2081) directly." }, { text: "Ax + By = C", correct: false, why: "Standard form doesn't show the point explicitly." }, { text: "y + y\u2081 = m(x + x\u2081)", correct: false, why: "Signs are reversed relative to the correct form." }] },
    { id: 11, topic: "Proportions & Percent", difficulty: 1, given: "part value and whole value", find: "percent p (as a number from 0 to 100)", prompt: "You know the part and the whole. Which equation gives the percent p?", choices: [{ text: "p = (part / whole) \u00d7 100", correct: true, why: "Percent is the fraction times 100." }, { text: "p = (whole / part) \u00d7 100", correct: false, why: "This inverts part and whole." }, { text: "p = part \u00d7 whole", correct: false, why: "Multiplying doesn't form a ratio." }, { text: "p = part - whole", correct: false, why: "Subtraction doesn't measure a percentage." }] },
    { id: 12, topic: "Proportions & Percent", difficulty: 1, given: "original value and new value", find: "percent increase", prompt: "Which equation correctly finds the percent increase from original to new?", choices: [{ text: "percent change = (new - original) / original \u00d7 100", correct: true, why: "Change divided by original gives the relative increase." }, { text: "percent change = (original - new) / original \u00d7 100", correct: false, why: "This gives a negative percent when there is an increase." }, { text: "percent change = new / original \u00d7 100", correct: false, why: "This gives the \u201cnew as a percent of original\u201d, not the change." }, { text: "percent change = (new - original) \u00d7 100", correct: false, why: "You must divide by original before multiplying by 100." }] },
    { id: 14, topic: "Right Triangles", difficulty: 1, given: "legs a and b of a right triangle", find: "hypotenuse c", prompt: "Which equation directly gives the hypotenuse c from legs a and b?", choices: [{ text: "c\u00b2 = a\u00b2 + b\u00b2", correct: true, why: "This is the Pythagorean Theorem for hypotenuse c." }, { text: "c = a\u00b2 + b\u00b2", correct: false, why: "You must take the square root to get c." }, { text: "c\u00b2 = a + b", correct: false, why: "The legs must be squared and then added." }, { text: "c = a + b", correct: false, why: "Simply adding legs doesn't give the hypotenuse." }] },
    { id: 15, topic: "Right Triangles", difficulty: 2, given: "hypotenuse c and one leg a", find: "the other leg b", prompt: "Select the equation that solves for leg b when you know c and a.", choices: [{ text: "b = \u221a(c\u00b2 - a\u00b2)", correct: true, why: "Rearrange c\u00b2 = a\u00b2 + b\u00b2 to isolate b." }, { text: "b = \u221a(a\u00b2 - c\u00b2)", correct: false, why: "This would make the expression inside the root negative." }, { text: "b = c\u00b2 + a\u00b2", correct: false, why: "You must subtract, not add, to isolate b\u00b2." }, { text: "b = c - a", correct: false, why: "The relationship is not linear; it involves squares." }] },
    { id: 16, topic: "Distance & Rate", difficulty: 1, given: "rate r and time t", find: "distance d", prompt: "Which equation uses rate r and time t to find distance d?", choices: [{ text: "d = rt", correct: true, why: "Distance equals rate times time." }, { text: "d = r + t", correct: false, why: "Adding the values doesn't use units correctly." }, { text: "d = r / t", correct: false, why: "r/t would have units of rate per time, not distance." }, { text: "d = t / r", correct: false, why: "This is the reciprocal of r; still not a distance." }] },
    { id: 17, topic: "Distance & Rate", difficulty: 2, given: "distance d and rate r", find: "time t", prompt: "You know d and r. Which equation gives time t?", choices: [{ text: "t = d / r", correct: true, why: "Solve d = rt for t by dividing both sides by r." }, { text: "t = r / d", correct: false, why: "This is the reciprocal of the correct ratio." }, { text: "t = d \u00b7 r", correct: false, why: "Multiplication does not isolate time correctly." }, { text: "t = d - r", correct: false, why: "Subtraction doesn't match d = rt." }] },
    { id: 18, topic: "Simple Interest", difficulty: 2, given: "principal P, rate r (as a decimal), and time t in years", find: "simple interest I", prompt: "Identify the formula that gives simple interest I from P, r, and t.", choices: [{ text: "I = Prt", correct: true, why: "Simple interest equals principal \u00d7 rate \u00d7 time." }, { text: "I = P + rt", correct: false, why: "You must multiply all three, not add them." }, { text: "I = P / rt", correct: false, why: "Dividing makes units incorrect." }, { text: "I = Pt / r", correct: false, why: "Rate belongs in the numerator, not the denominator." }] },
    { id: 20, topic: "Volume", difficulty: 1, given: "length L, width W, and height H of a rectangular prism", find: "volume V", prompt: "Choose the equation that gives volume V from L, W, and H.", choices: [{ text: "V = LWH", correct: true, why: "Volume is the product of length, width, and height." }, { text: "V = 2L + 2W + 2H", correct: false, why: "That looks like a perimeter-style expression." }, { text: "V = L + W + H", correct: false, why: "Adding gives only a length, not a volume." }, { text: "V = LW / H", correct: false, why: "Dividing by H doesn't match volume." }] },
    { id: 21, topic: "Volume", difficulty: 2, given: "radius r and height h of a cylinder", find: "volume V of the cylinder", prompt: "Which equation connects V, r, and h for a cylinder?", choices: [{ text: "V = \u03c0r\u00b2h", correct: true, why: "Volume = area of base (\u03c0r\u00b2) \u00d7 height." }, { text: "V = 2\u03c0rh", correct: false, why: "That's the lateral surface area, not the volume." }, { text: "V = \u03c0rh", correct: false, why: "The base area must include r\u00b2." }, { text: "V = 1/2 \u03c0r\u00b2h", correct: false, why: "Half would represent something like a half-cylinder, not a full one." }] },
    { id: 24, topic: "Functions", difficulty: 1, given: "a function f with input x and slope m, y-intercept b", find: "formula for f(x)", prompt: "Which equation correctly uses function notation with slope m and intercept b?", choices: [{ text: "f(x) = mx + b", correct: true, why: "This is slope-intercept form written with f(x)." }, { text: "f(x) = x/m + b", correct: false, why: "Slope is m, not 1/m." }, { text: "f(x) = x + mb", correct: false, why: "This does not match mx + b." }, { text: "f(x) = m + bx", correct: false, why: "Coefficients have been swapped." }] },
    { id: 25, topic: "Functions", difficulty: 2, given: "linear function f passes through points (0, b) and (1, b + m)", find: "function rule for f(x)", prompt: "Use the pattern in y-values to pick the correct equation.", choices: [{ text: "f(x) = mx + b", correct: true, why: "When x = 0, y = b; when x = 1, y = m + b." }, { text: "f(x) = b - mx", correct: false, why: "This would give f(1) = b - m, not b + m." }, { text: "f(x) = m - bx", correct: false, why: "Intercept would be m, not b." }, { text: "f(x) = x + b", correct: false, why: "Slope would be 1, not m." }] }
  ];

  const state = { filteredQuestions: [], currentIndex: 0, answered: false, totalAnswered: 0, totalCorrect: 0, currentTopic: "all" };

  function shuffle(array) { const arr = array.slice(); for (let i = arr.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [arr[i], arr[j]] = [arr[j], arr[i]]; } return arr; }
  function difficultyToStars(level) { let stars = ""; for (let i = 1; i <= 3; i++) { stars += i <= level ? "\u2605" : "\u2606"; } return stars; }
  function difficultyLabel(level) { const labels = ["", " (Warm-up)", " (Core practice)", " (Challenge)"]; return "Difficulty: " + difficultyToStars(level) + (labels[level] || ""); }
  function buildTopicList(questions) { const set = new Set(); questions.forEach(q => set.add(q.topic)); return Array.from(set).sort(); }

  let $topicSelect, $scoreChip, $progressInner, $questionCounter, $topicLabel, $difficultyLabel, $givenText, $findText, $mainPrompt, $options, $feedback, $footerStatus, $nextBtn, $skipBtn, $summary, $summaryScore, $summaryAccuracy, $summaryTopic;

  function cacheDom() {
    $topicSelect = document.getElementById("eqz-topic-select");
    $scoreChip = document.getElementById("eqz-score-chip");
    $progressInner = document.getElementById("eqz-progress-inner");
    $questionCounter = document.getElementById("eqz-question-counter");
    $topicLabel = document.getElementById("eqz-topic-label");
    $difficultyLabel = document.getElementById("eqz-difficulty-label");
    $givenText = document.getElementById("eqz-given-text");
    $findText = document.getElementById("eqz-find-text");
    $mainPrompt = document.getElementById("eqz-main-prompt");
    $options = document.getElementById("eqz-options");
    $feedback = document.getElementById("eqz-feedback");
    $footerStatus = document.getElementById("eqz-footer-status");
    $nextBtn = document.getElementById("eqz-next-btn");
    $skipBtn = document.getElementById("eqz-skip-btn");
    $summary = document.getElementById("eqz-summary");
    $summaryScore = document.getElementById("eqz-summary-score");
    $summaryAccuracy = document.getElementById("eqz-summary-accuracy");
    $summaryTopic = document.getElementById("eqz-summary-topic");
  }

  function applyTopicFilter(topic) {
    state.currentTopic = topic || "all";
    const base = state.currentTopic === "all" ? EQZ_QUESTIONS : EQZ_QUESTIONS.filter(q => q.topic === state.currentTopic);
    state.filteredQuestions = shuffle(base);
    state.currentIndex = 0;
  }

  function updateScoreChip() { $scoreChip.textContent = "Score: " + state.totalCorrect + " / " + state.totalAnswered; }
  function updateProgress() {
    const total = state.filteredQuestions.length || 1;
    const current = state.currentIndex + 1;
    const pct = Math.max(4, Math.min(100, (current / total) * 100));
    $progressInner.style.width = pct.toFixed(1) + "%";
    $questionCounter.textContent = "Question " + current + " of " + total;
  }

  function renderQuestion() {
    if (!state.filteredQuestions.length) applyTopicFilter("all");
    const q = state.filteredQuestions[state.currentIndex];
    $topicLabel.textContent = "Topic: " + q.topic;
    $difficultyLabel.textContent = difficultyLabel(q.difficulty);
    $givenText.textContent = q.given;
    $findText.textContent = q.find;
    $mainPrompt.textContent = q.prompt || "Which equation best matches this situation?";
    $options.innerHTML = "";
    const letters = ["A", "B", "C", "D"];
    q.choices.forEach((choice, idx) => {
      const btn = document.createElement("button");
      btn.className = "quiz-option";
      btn.type = "button";
      btn.dataset.index = String(idx);
      btn.dataset.letter = letters[idx] || "?";
      btn.textContent = choice.text;
      if (choice.why) { const expl = document.createElement("small"); expl.textContent = "Tap to check your understanding."; btn.appendChild(expl); }
      $options.appendChild(btn);
    });
    state.answered = false;
    $feedback.className = "quiz-feedback";
    $feedback.textContent = "";
    $footerStatus.textContent = "Click an answer to check your choice.";
    $nextBtn.disabled = true;
    updateProgress();
  }

  function showFeedback(isCorrect, explanation) {
    $feedback.className = "quiz-feedback visible " + (isCorrect ? "correct" : "incorrect");
    $feedback.textContent = (isCorrect ? "Correct: " : "Not quite: ") + explanation;
    $footerStatus.textContent = isCorrect ? "Nice! Review the explanation, then move on." : "Study the explanation, then try the next one.";
  }

  function lockOptions(correctIndex, chosenIndex) {
    const btns = $options.querySelectorAll(".quiz-option");
    btns.forEach((btn, idx) => {
      btn.classList.add("disabled");
      if (idx === correctIndex) btn.classList.add("correct");
      else if (idx === chosenIndex) btn.classList.add("incorrect");
    });
  }

  function showSummary() {
    const total = state.totalAnswered || 1;
    const pct = Math.round((state.totalCorrect / total) * 100);
    $summaryScore.textContent = "Correct: " + state.totalCorrect + " out of " + state.totalAnswered;
    $summaryAccuracy.textContent = "Accuracy this session: " + pct + "%";
    $summaryTopic.textContent = "Topic filter: " + (state.currentTopic === "all" ? "All topics" : state.currentTopic);
    $summary.classList.add("visible");
  }

  function hideSummary() { $summary.classList.remove("visible"); }

  function handleOptionClick(e) {
    const btn = e.target.closest(".quiz-option");
    if (!btn || state.answered) return;
    const index = parseInt(btn.dataset.index || "-1", 10);
    const q = state.filteredQuestions[state.currentIndex];
    const choice = q.choices[index];
    let correctIndex = q.choices.findIndex(c => c.correct);
    const wasCorrect = !!choice && !!choice.correct;
    state.answered = true;
    state.totalAnswered += 1;
    if (wasCorrect) state.totalCorrect += 1;
    updateScoreChip();
    lockOptions(correctIndex, index);
    const explanation = choice && choice.why ? choice.why : (wasCorrect ? "This equation directly matches the description." : "Compare this with the definition and the given values.");
    showFeedback(wasCorrect, explanation);
    $nextBtn.disabled = false;
    if (state.currentIndex === state.filteredQuestions.length - 1) showSummary();
    else hideSummary();
  }

  function handleNextClick() {
    if (state.currentIndex < state.filteredQuestions.length - 1) state.currentIndex += 1;
    else applyTopicFilter(state.currentTopic);
    hideSummary();
    renderQuestion();
  }

  function handleSkipClick() {
    const len = state.filteredQuestions.length;
    if (len <= 1) { renderQuestion(); return; }
    let newIndex = state.currentIndex;
    while (newIndex === state.currentIndex) newIndex = Math.floor(Math.random() * len);
    state.currentIndex = newIndex;
    hideSummary();
    renderQuestion();
  }

  function handleTopicChange() {
    const topic = $topicSelect.value || "all";
    applyTopicFilter(topic);
    hideSummary();
    renderQuestion();
  }

  function initEquationQuiz() {
    cacheDom();
    const topics = buildTopicList(EQZ_QUESTIONS);
    topics.forEach(topic => { const opt = document.createElement("option"); opt.value = topic; opt.textContent = topic; $topicSelect.appendChild(opt); });
    applyTopicFilter("all");
    updateScoreChip();
    renderQuestion();
    $options.addEventListener("click", handleOptionClick);
    $nextBtn.addEventListener("click", handleNextClick);
    $skipBtn.addEventListener("click", handleSkipClick);
    $topicSelect.addEventListener("change", handleTopicChange);
  }

  if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", initEquationQuiz);
  else initEquationQuiz();
})();
</script>
  <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="mahaque" data-description="Support me on Buy me a coffee!" data-message="I hope these resources helped you! It takes me a while to come up with ways to help students succeed, so your support is greatly appreciated!" data-color="#40DCA5" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
</body>
</html>
